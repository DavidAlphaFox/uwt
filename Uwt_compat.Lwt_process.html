<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Uwt_compat.Lwt_bytes.html">
<link rel="next" href="Uwt_compat.Lwt_throttle.html">
<link rel="Up" href="Uwt_compat.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Uv_fs_sync" rel="Chapter" href="Uv_fs_sync.html">
<link title="Uwt" rel="Chapter" href="Uwt.html">
<link title="Uwt_base" rel="Chapter" href="Uwt_base.html">
<link title="Uwt_bytes" rel="Chapter" href="Uwt_bytes.html">
<link title="Uwt_chan" rel="Chapter" href="Uwt_chan.html">
<link title="Uwt_compat" rel="Chapter" href="Uwt_compat.html">
<link title="Uwt_io" rel="Chapter" href="Uwt_io.html">
<link title="Uwt_log" rel="Chapter" href="Uwt_log.html">
<link title="Uwt_preemptive" rel="Chapter" href="Uwt_preemptive.html">
<link title="Uwt_process" rel="Chapter" href="Uwt_process.html">
<link title="Uwt_throttle" rel="Chapter" href="Uwt_throttle.html">
<link title="Uwt_timeout" rel="Chapter" href="Uwt_timeout.html"><link title="High-level functions" rel="Section" href="#2_Highlevelfunctions">
<link title="Spawning processes" rel="Section" href="#2_Spawningprocesses">
<link title="Redirections" rel="Subsection" href="#3_Redirections">
<link title="Executing" rel="Subsection" href="#3_Executing">
<link title="Receiving" rel="Subsection" href="#3_Receiving">
<link title="Sending" rel="Subsection" href="#3_Sending">
<link title="Mapping" rel="Subsection" href="#3_Mapping">
<title>Uwt - OCaml bindings for libuv : Uwt_compat.Lwt_process</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Uwt_compat.Lwt_bytes.html" title="Uwt_compat.Lwt_bytes">Previous</a>
&nbsp;<a class="up" href="Uwt_compat.html" title="Uwt_compat">Up</a>
&nbsp;<a class="post" href="Uwt_compat.Lwt_throttle.html" title="Uwt_compat.Lwt_throttle">Next</a>
</div>
<h1>Module <a href="type_Uwt_compat.Lwt_process.html">Uwt_compat.Lwt_process</a></h1>

<pre><span class="keyword">module</span> Lwt_process: <code class="type"><a href="Uwt_process.html">Uwt_process</a></code></pre><hr width="100%">
<br>
This module allows you to spawn processes and communicate with them.<br>

<pre><span id="TYPEcommand"><span class="keyword">type</span> <code class="type"></code>command</span> = <code class="type">string * string array</code> </pre>
<div class="info ">
A command. The first field is the name of the executable and
        the second is the list of arguments. For example:
<p>

        <pre class="codepre"><code class="code">          ("ls", [|"ls"; "-l"|])
        </code></pre>
<p>

        Notes:
<p>
<ul>
<li>if the name is the empty string, then the first argument
          will be used (for backward compatibility with <code class="code">Lwt_process</code>).</li>
</ul>
<ul>
<li>It is not possible to ``inline'' an argument,
          i.e. split it into multiple arguments with "\000".
          (like under <code class="code">Lwt_process</code>)</li>
</ul>
<br>
</div>


<pre><span id="VALshell"><span class="keyword">val</span> shell</span> : <code class="type">string -> <a href="Uwt_process.html#TYPEcommand">command</a></code></pre><div class="info ">
A command executed with the shell. (with <code class="code">"/bin/sh -c &lt;cmd&gt;"</code> on
      Unix and <code class="code">"cmd.exe /c &lt;cmd&gt;"</code> on Windows).<br>
</div>
<br>
All the following functions take an optional argument
    <code class="code">timeout</code>. If specified, after expiration, the process will be
    sent a <code class="code">Unix.sigkill</code> signal and channels will be closed.<br>
<br>
<h2 id="2_Highlevelfunctions">High-level functions</h2><br>
<br>
<h3 id="3_Redirections">Redirections</h3><br>

<pre><span id="TYPEredirection"><span class="keyword">type</span> <code class="type"></code>redirection</span> = <code class="type">[ `Close<br>       | `Dev_null<br>       | `FD_copy of Unix.file_descr<br>       | `FD_move of Unix.file_descr<br>       | `File_copy of Uwt.file<br>       | `File_move of Uwt.file<br>       | `Keep<br>       | `Pipe_copy of <a href="Uwt.Pipe.html#TYPEt">Uwt.Pipe.t</a><br>       | `Pipe_move of <a href="Uwt.Pipe.html#TYPEt">Uwt.Pipe.t</a><br>       | `Stream_copy of <a href="Uwt.Stream.html#TYPEt">Uwt.Stream.t</a><br>       | `Stream_move of <a href="Uwt.Stream.html#TYPEt">Uwt.Stream.t</a> ]</code> </pre>
<div class="info ">
A file descriptor redirection. It describes how standard file
    descriptors are redirected in the child process.<br>
</div>

<br>
Note: all optional redirection arguments default to <code class="code">`Keep</code><br>
<br>
<h3 id="3_Executing">Executing</h3><br>

<pre><span id="VALexec"><span class="keyword">val</span> exec</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> Unix.process_status Lwt.t</code></pre><div class="info ">
Executes the given command and returns its exit status.
      <code class="code">Unix.WSTOPPED</code> is not supported by libuv at the moment.
      It will return either <code class="code">Unix.WSIGNALED</code> or <code class="code">Unix.WEXITED</code><br>
</div>
<br>
<h3 id="3_Receiving">Receiving</h3><br>

<pre><span id="VALpread"><span class="keyword">val</span> pread</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> string Lwt.t</code></pre>
<pre><span id="VALpread_chars"><span class="keyword">val</span> pread_chars</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> char Lwt_stream.t</code></pre>
<pre><span id="VALpread_line"><span class="keyword">val</span> pread_line</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> string Lwt.t</code></pre>
<pre><span id="VALpread_lines"><span class="keyword">val</span> pread_lines</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> string Lwt_stream.t</code></pre><br>
<h3 id="3_Sending">Sending</h3><br>

<pre><span id="VALpwrite"><span class="keyword">val</span> pwrite</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> string -> unit Lwt.t</code></pre>
<pre><span id="VALpwrite_chars"><span class="keyword">val</span> pwrite_chars</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> char Lwt_stream.t -> unit Lwt.t</code></pre>
<pre><span id="VALpwrite_line"><span class="keyword">val</span> pwrite_line</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> string -> unit Lwt.t</code></pre>
<pre><span id="VALpwrite_lines"><span class="keyword">val</span> pwrite_lines</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> string Lwt_stream.t -> unit Lwt.t</code></pre><br>
<h3 id="3_Mapping">Mapping</h3><br>

<pre><span id="VALpmap"><span class="keyword">val</span> pmap</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> string -> string Lwt.t</code></pre>
<pre><span id="VALpmap_chars"><span class="keyword">val</span> pmap_chars</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> char Lwt_stream.t -> char Lwt_stream.t</code></pre>
<pre><span id="VALpmap_line"><span class="keyword">val</span> pmap_line</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> string -> string Lwt.t</code></pre>
<pre><span id="VALpmap_lines"><span class="keyword">val</span> pmap_lines</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> string Lwt_stream.t -> string Lwt_stream.t</code></pre><br>
<h2 id="2_Spawningprocesses">Spawning processes</h2><br>

<pre><code><span id="TYPEstate"><span class="keyword">type</span> <code class="type"></code>state</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTstate.Running"><span class="constructor">Running</span></span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
The process is still running<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTstate.Exited"><span class="constructor">Exited</span></span> <span class="keyword">of</span> <code class="type">Unix.process_status</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
The process has exited<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>

<div class="info ">
State of a sub-process<br>
</div>


<pre><span name="TYPEprocess_none"><span class="keyword">class</span> <a href="Uwt_process.process_none-c.html">process_none</a></span> : <code class="type">?timeout:float -> ?uid:int -> ?gid:int -> ?env:string array -> ?cwd:string -> ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> </code><code class="code">object</code> <a href="Uwt_process.process_none-c.html">..</a> <code class="code">end</code></pre>
<pre><span id="VALopen_process_none"><span class="keyword">val</span> open_process_none</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> <a href="Uwt_process.process_none-c.html">process_none</a></code></pre>
<pre><span id="VALwith_process_none"><span class="keyword">val</span> with_process_none</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> (<a href="Uwt_process.process_none-c.html">process_none</a> -> 'a Lwt.t) -> 'a Lwt.t</code></pre>
<pre><span name="TYPEprocess_in"><span class="keyword">class</span> <a href="Uwt_process.process_in-c.html">process_in</a></span> : <code class="type">?timeout:float -> ?uid:int -> ?gid:int -> ?env:string array -> ?cwd:string -> ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> </code><code class="code">object</code> <a href="Uwt_process.process_in-c.html">..</a> <code class="code">end</code></pre>
<pre><span id="VALopen_process_in"><span class="keyword">val</span> open_process_in</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> <a href="Uwt_process.process_in-c.html">process_in</a></code></pre>
<pre><span id="VALwith_process_in"><span class="keyword">val</span> with_process_in</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdin:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> (<a href="Uwt_process.process_in-c.html">process_in</a> -> 'a Lwt.t) -> 'a Lwt.t</code></pre>
<pre><span name="TYPEprocess_out"><span class="keyword">class</span> <a href="Uwt_process.process_out-c.html">process_out</a></span> : <code class="type">?timeout:float -> ?uid:int -> ?gid:int -> ?env:string array -> ?cwd:string -> ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> </code><code class="code">object</code> <a href="Uwt_process.process_out-c.html">..</a> <code class="code">end</code></pre>
<pre><span id="VALopen_process_out"><span class="keyword">val</span> open_process_out</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> <a href="Uwt_process.process_out-c.html">process_out</a></code></pre>
<pre><span id="VALwith_process_out"><span class="keyword">val</span> with_process_out</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stdout:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> (<a href="Uwt_process.process_out-c.html">process_out</a> -> 'a Lwt.t) -> 'a Lwt.t</code></pre>
<pre><span name="TYPEprocess"><span class="keyword">class</span> <a href="Uwt_process.process-c.html">process</a></span> : <code class="type">?timeout:float -> ?uid:int -> ?gid:int -> ?env:string array -> ?cwd:string -> ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> </code><code class="code">object</code> <a href="Uwt_process.process-c.html">..</a> <code class="code">end</code></pre>
<pre><span id="VALopen_process"><span class="keyword">val</span> open_process</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -> <a href="Uwt_process.html#TYPEcommand">command</a> -> <a href="Uwt_process.process-c.html">process</a></code></pre>
<pre><span id="VALwith_process"><span class="keyword">val</span> with_process</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       ?stderr:<a href="Uwt_process.html#TYPEredirection">redirection</a> -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> (<a href="Uwt_process.process-c.html">process</a> -> 'a Lwt.t) -> 'a Lwt.t</code></pre>
<pre><span name="TYPEprocess_full"><span class="keyword">class</span> <a href="Uwt_process.process_full-c.html">process_full</a></span> : <code class="type">?timeout:float -> ?uid:int -> ?gid:int -> ?env:string array -> ?cwd:string -> <a href="Uwt_process.html#TYPEcommand">command</a> -> </code><code class="code">object</code> <a href="Uwt_process.process_full-c.html">..</a> <code class="code">end</code></pre>
<pre><span id="VALopen_process_full"><span class="keyword">val</span> open_process_full</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -> <a href="Uwt_process.html#TYPEcommand">command</a> -> <a href="Uwt_process.process_full-c.html">process_full</a></code></pre>
<pre><span id="VALwith_process_full"><span class="keyword">val</span> with_process_full</span> : <code class="type">?timeout:float -><br>       ?uid:int -><br>       ?gid:int -><br>       ?env:string array -><br>       ?cwd:string -><br>       <a href="Uwt_process.html#TYPEcommand">command</a> -> (<a href="Uwt_process.process_full-c.html">process_full</a> -> 'a Lwt.t) -> 'a Lwt.t</code></pre></body></html>